<html>
<head>
</head>
<body>
    <!-- load wasm as --target web https://rustwasm.github.io/wasm-bindgen/examples/without-a-bundler.html -->    
    <script type="module">
        import init, { Wallet } from './pkg_st/zeos_orchard.js';
        await init();
        console.log('wasm loaded');

        console.log("create wallets...");
        var sender = Wallet.new("This is the sender wallets seed string. It must be at least 32 characters long!")
        console.log("sender wallet: " + sender.to_string());

        var auth = [{actor: "newstock1dex", permission: "active"}];
        var descs = [{
            action: {
                account: "eosio.token",
                name: "transfer",
                authorization: auth,
                data: "{\"from\":\"newstock1dex\", \"to\":\"thezeostoken\", \"quantity\":\"1.0000 EOS\", \"memo\":\"miau\"}"
            },
            zaction_descs: []
        }, {
            action: {
                account: "thezeostoken",
                name: "exec",
                authorization: [{actor: "thezeostoken", permission: "active"}],
                data: ""
            },
            zaction_descs: [{
                za_type: 1, //ZA_MINTFT,
                to: sender.address(0),
                d1: "10000",
                d2: "1397703940",
                sc: "thezeostoken",
                memo: "This is a test!"
            }]
        }];

        var tx = JSON.parse(await sender.create_transaction(descs, auth));
        console.log(JSON.stringify(tx, null, 2));
    </script>
</body>
</html>
